# ✅ 部署检查清单

在部署前，请确保以下所有项目都已完成：

## 📋 部署前检查

### 代码准备
- [ ] 所有代码已推送到Git仓库
- [ ] 删除了敏感信息（API密钥、密码等）
- [ ] 更新了README.md文件
- [ ] 项目在本地正常运行

### 数据库准备
- [ ] 已将数据库从SQLite切换到PostgreSQL
- [ ] 更新了`prisma/schema.prisma`配置
- [ ] 测试了数据库连接
- [ ] 准备了数据库迁移脚本

### 环境变量配置
- [ ] 创建了后端`.env`文件
- [ ] 创建了前端`.env.local`文件
- [ ] 所有占位符已替换为实际值
- [ ] JWT_SECRET已更改为强密码

### 依赖和构建
- [ ] 后端依赖安装成功
- [ ] 前端依赖安装成功
- [ ] 后端构建测试通过
- [ ] 前端构建测试通过

---

## 🚀 部署步骤检查

### 方案1：Vercel + Railway部署

#### Railway（后端）部署
- [ ] 创建Railway账户
- [ ] 连接GitHub仓库
- [ ] 选择`backend`文件夹
- [ ] 添加PostgreSQL数据库
- [ ] 配置环境变量：
  - [ ] `DATABASE_URL`（自动生成）
  - [ ] `JWT_SECRET`
  - [ ] `JWT_EXPIRES_IN`
  - [ ] `NODE_ENV=production`
  - [ ] `FRONTEND_URL`
- [ ] 部署成功
- [ ] 获取后端域名

#### Vercel（前端）部署
- [ ] 创建Vercel账户
- [ ] 连接GitHub仓库
- [ ] 设置Root Directory为`frontend`
- [ ] 配置环境变量：
  - [ ] `NEXT_PUBLIC_API_URL`（Railway后端域名）
  - [ ] `NEXT_PUBLIC_SITE_NAME`
  - [ ] `NEXT_PUBLIC_SITE_DESCRIPTION`
  - [ ] `NEXT_PUBLIC_SITE_URL`
- [ ] 部署成功
- [ ] 获取前端域名

#### 数据库初始化
- [ ] 运行数据库迁移：`npm run db:migrate`
- [ ] 创建第一个用户账户
- [ ] 将第一个用户设为管理员

### 方案2：VPS自托管部署

#### 服务器准备
- [ ] 购买并配置VPS服务器
- [ ] 安装Node.js 18+
- [ ] 安装PM2
- [ ] 安装Nginx
- [ ] 安装PostgreSQL
- [ ] 配置防火墙

#### 应用部署
- [ ] 克隆代码到服务器
- [ ] 安装后端依赖
- [ ] 配置后端环境变量
- [ ] 构建后端项目
- [ ] 使用PM2启动后端
- [ ] 安装前端依赖
- [ ] 配置前端环境变量
- [ ] 构建前端项目
- [ ] 使用PM2启动前端

#### 服务器配置
- [ ] 配置Nginx反向代理
- [ ] 配置SSL证书
- [ ] 设置PM2开机自启
- [ ] 配置日志轮转

---

## 🔧 部署后验证

### 功能测试
- [ ] 网站首页正常访问
- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 文章创建功能正常
- [ ] 文章列表显示正常
- [ ] 文章详情页面正常
- [ ] 文章编辑功能正常
- [ ] 文章删除功能正常
- [ ] 搜索功能正常
- [ ] 管理员功能正常

### 性能测试
- [ ] 页面加载速度合理（<3秒）
- [ ] 移动端显示正常
- [ ] 图片加载正常
- [ ] API响应时间合理（<1秒）

### 安全测试
- [ ] HTTPS证书正常
- [ ] 跨域请求正常
- [ ] 认证权限正常
- [ ] 敏感信息未泄露

---

## 🔒 安全配置检查

### 服务器安全
- [ ] 使用SSH密钥而非密码
- [ ] 配置防火墙规则
- [ ] 定期更新系统
- [ ] 限制root用户访问

### 应用安全
- [ ] 所有API启用速率限制
- [ ] 使用强JWT密钥
- [ ] 配置安全头部
- [ ] 启用CORS白名单

### 数据安全
- [ ] 数据库使用强密码
- [ ] 限制数据库访问IP
- [ ] 定期备份数据
- [ ] 加密敏感数据

---

## 🌐 域名和DNS配置

### 域名设置
- [ ] 购买域名
- [ ] 配置DNS解析
- [ ] 设置A记录指向服务器
- [ ] 设置CNAME记录
- [ ] 验证域名解析

### SSL证书
- [ ] 申请SSL证书
- [ ] 配置HTTPS重定向
- [ ] 测试证书有效性
- [ ] 设置证书自动续期

---

## 📊 监控和分析

### 监控设置
- [ ] 配置服务器监控
- [ ] 设置应用监控
- [ ] 配置错误报告
- [ ] 设置告警通知

### 分析工具
- [ ] 配置网站分析
- [ ] 设置性能监控
- [ ] 配置日志分析
- [ ] 设置备份监控

---

## 🎯 最终检查

### 文档和支持
- [ ] 更新项目README
- [ ] 创建用户手册
- [ ] 准备技术支持
- [ ] 设置反馈渠道

### 备份和恢复
- [ ] 测试数据备份
- [ ] 验证恢复流程
- [ ] 文档化备份策略
- [ ] 设置自动备份

### 上线准备
- [ ] 通知用户上线时间
- [ ] 准备上线公告
- [ ] 监控上线状态
- [ ] 准备回滚计划

---

## 🎉 完成！

当所有检查项都完成后，恭喜你！你的博客网站已经成功部署上线了。

记住：
- 定期检查和更新
- 监控网站性能
- 备份重要数据
- 收集用户反馈

如果遇到问题，请参考《部署指南.md》或寻求技术支持。 